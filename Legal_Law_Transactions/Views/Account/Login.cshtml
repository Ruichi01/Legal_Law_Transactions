@inject IConfiguration Configuration;
@{
    ViewData["Title"] = "Login";
}

<div class="container-fluid min-vh-100 d-flex align-items-center justify-content-center" style="font-family: 'Poppins', sans-serif;">
    <div class="row w-100 d-flex justify-content-center align-items-center flex-row-reverse">
        <div class="col-md-6 d-flex align-items-center justify-content-center">
            <div class="w-75">
                <h2 class="fw-bold">Welcome back, User</h2>
                <p class="text-muted mb-4">Welcome back! Please enter your details.</p>

                @if (ViewBag.Error != null)
                {
                    <div class="alert alert-danger">@ViewBag.Error</div>
                }

                <form method="post" action="/Account/Login">
                    <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control border-bottom-only" id="email" name="email" required />
                    </div>

                    <div class="mb-3">
                        <label for="password" class="form-label">Password</label>
                        <div class="position-relative">
                            <input type="password" class="form-control border-bottom-only pe-5" id="password" name="password" required />
                            <i class="bi bi-eye-slash position-absolute top-50 end-0 translate-middle-y me-3 fs-5 text-dark"
                               id="toggleIcon"
                               style="cursor: pointer;"
                               onclick="togglePassword('password', 'toggleIcon')"></i>
                        </div>

                    </div>

                    <div class="mb-3 d-flex justify-content-center align-items-center">
                        <div>
                            <input type="checkbox" class="form-check-input me-1" id="terms" required />
                            <label class="form-check-label" for="terms">
                                <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">Terms & Conditions</a>
                            </label>
                        </div>
                    </div>

                    <div class="mb-3 d-flex justify-content-center">
                        <div class="g-recaptcha" data-sitekey="6LdhECsrAAAAAMRmc4OspTsgTgMnXUJ102Zc7qhp"></div>
                    </div>

                    <button type="submit" class="btn btn-dark w-100 rounded-3">Log in</button>
                </form>

                <p class="mt-3 text-center text-muted">
                    Don’t have an account? <a href="/Account/Register" class="fw-semibold">Apply now!</a>
                </p>
            </div>
        </div>
        <div class="col-md-6 d-none d-md-flex align-items-center justify-content-center">
            <img src="~/images/logo.png" alt="Login Illustration" class="img-fluid" style="max-width: 300px; max-height: 200px;" />
        </div>
    </div>
</div>

<div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="termsModalLabel">Terms & Conditions</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p><strong>Terms:</strong></p>
                <p>
                    By accessing this system, you agree to abide by all applicable laws and regulations. You also agree not to misuse or redistribute any protected information provided herein. Your use of this system may be monitored for security purposes.
                </p>
                <p>
                    This system is intended for authorized users only. Unauthorized access is prohibited and may be subject to legal action.
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<script>
    function togglePassword(id, iconId) {
        const field = document.getElementById(id);
        const icon = document.getElementById(iconId);
        if (field.type === "password") {
            field.type = "text";
            icon.classList.replace("bi-eye-slash", "bi-eye");
        } else {
            field.type = "password";
            icon.classList.replace("bi-eye", "bi-eye-slash");
        }
    }
</script>
<script src="https://www.google.com/recaptcha/api.js" async defer></script>

<style>
    .border-bottom-only {
        border: none;
        border-bottom: 1px solid #ccc;
        border-radius: 0;
        font-family: 'Poppins', sans-serif;
    }
</style>
